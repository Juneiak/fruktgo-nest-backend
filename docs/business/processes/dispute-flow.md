# –ü—Ä–æ—Ü–µ—Å—Å: –°–ø–æ—Ä—ã –∏ –≥–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞

**–£—á–∞—Å—Ç–Ω–∏–∫–∏:** Customer, Seller, Shop, PlatformStaff  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** Order Module, Issue Module, Penalty Module, Refund Module

---

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–ø–æ—Ä–æ–≤ ‚Äî **–∫–ª—é—á–µ–≤–∞—è —Ñ–∏—á–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã**, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—é –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ (–∞–Ω–∞–ª–æ–≥ Poizon/Dewu).

**–ü—Ä–∏–Ω—Ü–∏–ø—ã:**
- –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∞—Ä–±–∏—Ç—Ä–æ–º –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ –º–∞–≥–∞–∑–∏–Ω–æ–º
- –ó–∞—â–∏—Ç–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∫–∞—á–µ—Å—Ç–≤–æ–º
- –ó–∞—â–∏—Ç–∞ –º–∞–≥–∞–∑–∏–Ω–∞ –æ—Ç –Ω–µ–¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

**–†–µ–π—Ç–∏–Ω–≥ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞** (0-100) ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π.

---

## 1. –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–ø–æ—Ä–∞

**–ê–∫—Ç–æ—Ä:** Customer

### –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π

1. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏–ª –∑–∞–∫–∞–∑ ‚Üí –æ–±–Ω–∞—Ä—É–∂–∏–ª –ø—Ä–æ–±–ª–µ–º—É (–ø–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –Ω–µ–¥–æ–≤–µ—Å, –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ —Ç.–¥.)
2. –í –ø–∞–Ω–µ–ª–∏ ‚Üí "–ú–æ–∏ –∑–∞–∫–∞–∑—ã" ‚Üí –≤—ã–±–æ—Ä –∑–∞–∫–∞–∑–∞ ‚Üí "–û—Ç–∫—Ä—ã—Ç—å —Å–ø–æ—Ä"
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π:**
   - –ó–∞–∫–∞–∑ –≤ —Å—Ç–∞—Ç—É—Å–µ `DELIVERED` ‚úì
   - –ü—Ä–æ—à–ª–æ –º–µ–Ω–µ–µ 24 —á–∞—Å–æ–≤ —Å –º–æ–º–µ–Ω—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ ‚úì
   - –°–ø–æ—Ä –ø–æ —ç—Ç–æ–º—É –∑–∞–∫–∞–∑—É –µ—â—ë –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–ª—Å—è ‚úì
   - –†–µ–π—Ç–∏–Ω–≥ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞ ‚â•30 –±–∞–ª–ª–æ–≤ ‚úì
4. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã —Å–ø–æ—Ä–∞:
   - –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã (–∫–∞—á–µ—Å—Ç–≤–æ/–Ω–µ–¥–æ–≤–µ—Å/–Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ/–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ)
   - –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - **–§–æ—Ç–æ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤:** –º–∏–Ω–∏–º—É–º 2, –º–∞–∫—Å–∏–º—É–º 5 (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - –í–∏–¥–µ–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –£–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∏ –∂–µ–ª–∞–µ–º–æ–π —Å—É–º–º—ã –≤–æ–∑–≤—Ä–∞—Ç–∞
5. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç `Issue`:
   ```typescript
   {
     type: "DISPUTE",
     category: "PRODUCT_QUALITY",
     order: orderId,
     fromUserType: "Customer",
     from: customerId,
     issueText: "–Ø–±–ª–æ–∫–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å –≥–Ω–∏–ª—ã–º–∏ –≤–Ω—É—Ç—Ä–∏...",
     evidence: {
       photos: ["photo1.jpg", "photo2.jpg", "photo3.jpg"],
       video: "video.mp4"
     },
     affectedProducts: [
       {
         shopProduct: productId,
         orderedQuantity: 2,
         affectedQuantity: 2,
         claimedRefund: 500
       }
     ],
     totalClaimedAmount: 500,
     status: "new"
   }
   ```
6. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
   - –ö–ª–∏–µ–Ω—Ç—É: "–°–ø–æ—Ä –æ—Ç–∫—Ä—ã—Ç, –æ–∂–∏–¥–∞–π—Ç–µ –æ—Ç–≤–µ—Ç–∞ –º–∞–≥–∞–∑–∏–Ω–∞"
   - –°–µ–ª–ª–µ—Ä—É: "üö® –°–†–û–ß–ù–û! –û—Ç–∫—Ä—ã—Ç —Å–ø–æ—Ä –ø–æ –∑–∞–∫–∞–∑—É #12345. –û—Ç–≤–µ—Ç—å—Ç–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 12 —á–∞—Å–æ–≤"

**API:** `POST /customer/orders/:id/disputes`

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–ø–æ—Ä–æ–≤

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ß–∞—Å—Ç–æ—Ç–∞ |
|-----------|----------|---------|
| `PRODUCT_QUALITY` | –ü–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –≥–Ω–∏–ª—å, –Ω–µ—Å–≤–µ–∂–µ–µ | 60% |
| `WEIGHT_SHORTAGE` | –ù–µ–¥–æ–≤–µ—Å —Ç–æ–≤–∞—Ä–∞ | 20% |
| `PRODUCT_MISMATCH` | –ù–µ —Ç–æ—Ç —Ç–æ–≤–∞—Ä, –¥—Ä—É–≥–æ–π —Å–æ—Ä—Ç | 10% |
| `DAMAGED_PACKAGING` | –ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞ | 5% |
| `MISSING_ITEMS` | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∑–∞–∫–∞–∑–∞ | 3% |
| `OTHER` | –ü—Ä–æ—á–∏–µ –ø—Ä–æ–±–ª–µ–º—ã | 2% |

---

## 2. –û—Ç–≤–µ—Ç –º–∞–≥–∞–∑–∏–Ω–∞

**–ê–∫—Ç–æ—Ä:** Seller

### –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π

1. –°–µ–ª–ª–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–ø–æ—Ä–µ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤ –ø–∞–Ω–µ–ª–∏ `/seller/disputes`
2. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç:
   - –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
   - –§–æ—Ç–æ/–≤–∏–¥–µ–æ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
   - –°—É–º–º—É –ø—Ä–µ—Ç–µ–Ω–∑–∏–∏
   - –û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è –Ω–∞ –æ—Ç–≤–µ—Ç (12 —á–∞—Å–æ–≤)
3. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ:

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ü—Ä–∏–∑–Ω–∞—Ç—å —Å–ø–æ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é

```typescript
{
  action: "ACCEPT",
  comment: "–ü—Ä–∏–Ω–æ—Å–∏–º –∏–∑–≤–∏–Ω–µ–Ω–∏—è, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –±—ã–ª –±—Ä–∞–∫",
  proposedResolution: {
    type: "FULL_REFUND",
    amount: 500
  }
}
```

- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç
- –ú–∞–≥–∞–∑–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç —à—Ç—Ä–∞—Ñ (200-500‚ÇΩ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—É–º–º—ã)
- –°—Ç–∞—Ç—É—Å —Å–ø–æ—Ä–∞ ‚Üí `resolved`

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ü—Ä–∏–∑–Ω–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ

```typescript
{
  action: "PARTIAL_ACCEPT",
  comment: "–°–æ–≥–ª–∞—Å–Ω—ã —á–∞—Å—Ç–∏—á–Ω–æ, –≤–µ—Ä–Ω—ë–º 50% —Å—Ç–æ–∏–º–æ—Å—Ç–∏",
  proposedResolution: {
    type: "PARTIAL_REFUND",
    amount: 250
  }
}
```

- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è –∏–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∞—Ä–±–∏—Ç—Ä–∞–∂

#### –í–∞—Ä–∏–∞–Ω—Ç C: –û—Å–ø–æ—Ä–∏—Ç—å

```typescript
{
  action: "REJECT",
  comment: "–¢–æ–≤–∞—Ä –±—ã–ª —Å–≤–µ–∂–∏–º –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ, –ø–æ–∫–∞–∑–∞–Ω–∏—è –≤–µ—Å–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã",
  evidence: {
    photos: ["warehouse_photo.jpg", "scale_photo.jpg"]
  }
}
```

- –°–ø–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –Ω–∞ –∞—Ä–±–∏—Ç—Ä–∞–∂ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

**API:** `POST /seller/disputes/:id/respond`

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–Ω—è—Ç–∏–µ

–ï—Å–ª–∏ –º–∞–≥–∞–∑–∏–Ω –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª –≤ —Ç–µ—á–µ–Ω–∏–µ 12 —á–∞—Å–æ–≤:
1. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–æ—Ä ‚Üí `ACCEPT`
2. –ò–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –∫–ª–∏–µ–Ω—Ç—É
3. –ú–∞–≥–∞–∑–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç —à—Ç—Ä–∞—Ñ 200‚ÇΩ –∑–∞ –Ω–µ–æ—Ç–≤–µ—Ç
4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–µ–ª–ª–µ—Ä—É –æ–± –∞–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏–∏

---

## 3. –ê—Ä–±–∏—Ç—Ä–∞–∂ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

**–ê–∫—Ç–æ—Ä:** PlatformStaff

### –ö–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—Ä–±–∏—Ç—Ä–∞–∂?

- –ú–∞–≥–∞–∑–∏–Ω –æ—Å–ø–æ—Ä–∏–ª –ø—Ä–µ—Ç–µ–Ω–∑–∏—é (`REJECT`)
- –ö–ª–∏–µ–Ω—Ç –Ω–µ —Å–æ–≥–ª–∞—Å–µ–Ω —Å —á–∞—Å—Ç–∏—á–Ω—ã–º –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ–º
- –°—É–º–º–∞ —Å–ø–æ—Ä–∞ >5000‚ÇΩ (–∫—Ä—É–ø–Ω—ã–π —Å–ø–æ—Ä)
- –†–µ–π—Ç–∏–Ω–≥ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞ <50 –±–∞–ª–ª–æ–≤ (–ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç)

### –°—Ü–µ–Ω–∞—Ä–∏–π —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è

1. –ê–¥–º–∏–Ω –≤ `/platform/disputes` ‚Üí —Ñ–∏–ª—å—Ç—Ä `requiresArbitration = true`
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–ø–æ—Ä ‚Üí –≤–∏–¥–∏—Ç:
   - –û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ + –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
   - –û—Ç–≤–µ—Ç –º–∞–≥–∞–∑–∏–Ω–∞ + –∫–æ–Ω—Ç—Ä–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
   - –ò—Å—Ç–æ—Ä–∏—é –∑–∞–∫–∞–∑–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞
   - –ò—Å—Ç–æ—Ä–∏—é —Å–ø–æ—Ä–æ–≤ –º–∞–≥–∞–∑–∏–Ω–∞
   - –†–µ–π—Ç–∏–Ω–≥ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞
3. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫—Ä–∏—Ç–µ—Ä–∏–∏:

**–í –ø–æ–ª—å–∑—É –∫–ª–∏–µ–Ω—Ç–∞:**
- –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø—Ä–æ–±–ª–µ–º—ã
- –ù–∏–∑–∫–∏–π % —Å–ø–æ—Ä–æ–≤ —É –∫–ª–∏–µ–Ω—Ç–∞ (<5% –æ—Ç –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤)
- –ò—Å—Ç–æ—Ä–∏—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã—Ö –∂–∞–ª–æ–± –Ω–∞ —ç—Ç–æ—Ç –º–∞–≥–∞–∑–∏–Ω
- –†–µ–π—Ç–∏–Ω–≥ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞ >70

**–í –ø–æ–ª—å–∑—É –º–∞–≥–∞–∑–∏–Ω–∞:**
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ/–Ω–µ—É–±–µ–¥–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- –í—ã—Å–æ–∫–∏–π % —Å–ø–æ—Ä–æ–≤ —É –∫–ª–∏–µ–Ω—Ç–∞ (>15%)
- –ú–∞–≥–∞–∑–∏–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª –∫–æ–Ω—Ç—Ä–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- –†–µ–π—Ç–∏–Ω–≥ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞ <50

4. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ:

#### –ü–æ–ª–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –≤ –ø–æ–ª—å–∑—É –∫–ª–∏–µ–Ω—Ç–∞

```typescript
{
  decision: "FULL_REFUND",
  amount: 500,
  penaltyForShop: 500,  // 500-5000‚ÇΩ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—É–º–º—ã
  compensationBonus: 100,  // –ë–æ–Ω—É—Å—ã –∫–ª–∏–µ–Ω—Ç—É
  comment: "–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –ø—Ä–µ—Ç–µ–Ω–∑–∏—é –∫–ª–∏–µ–Ω—Ç–∞"
}
```

#### –ß–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç

```typescript
{
  decision: "PARTIAL_REFUND",
  amount: 250,
  penaltyForShop: 200,
  compensationBonus: 50,
  comment: "–ß–∞—Å—Ç–∏—á–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–µ—Ç–µ–Ω–∑–∏—è"
}
```

#### –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–ø–æ—Ä–∞

```typescript
{
  decision: "REJECT",
  reliabilityScoreImpact: -10,  // –°–Ω–∏–∂–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –∫–ª–∏–µ–Ω—Ç–∞
  comment: "–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã"
}
```

**API:** `POST /platform/disputes/:id/resolve`

---

## 4. –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è

**–ê–∫—Ç–æ—Ä:** –°–∏—Å—Ç–µ–º–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### –ü—Ä–∏ —Ä–µ—à–µ–Ω–∏–∏ –≤ –ø–æ–ª—å–∑—É –∫–ª–∏–µ–Ω—Ç–∞

1. **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**
   - –°–æ–∑–¥–∞—ë—Ç—Å—è `Refund` –Ω–∞ —Å—É–º–º—É —Ä–µ—à–µ–Ω–∏—è
   - –°–æ–∑–¥–∞—ë—Ç—Å—è `Penalty` –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞
   - –ù–∞—á–∏—Å–ª—è—é—Ç—Å—è –±–æ–Ω—É—Å–Ω—ã–µ –±–∞–ª–ª—ã –∫–ª–∏–µ–Ω—Ç—É (–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è)
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**
   - `customer.disputesWon++`
   - `customer.reliabilityScore` (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–ª–∏ +5)
   - `shop.disputesLost++`
   - `shop.qualityScore -= 2`
3. **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—á—ë—Ç:**
   - –í–æ–∑–≤—Ä–∞—Ç –≤—ã—á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ `SettlementPeriod.refunds`
   - –®—Ç—Ä–∞—Ñ –≤—ã—á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ `SettlementPeriod.penalties`
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
   - –ö–ª–∏–µ–Ω—Ç—É: "–°–ø–æ—Ä —Ä–µ—à—ë–Ω –≤ –≤–∞—à—É –ø–æ–ª—å–∑—É. –í–æ–∑–≤—Ä–∞—Ç 500‚ÇΩ + 100 –±–æ–Ω—É—Å–æ–≤"
   - –°–µ–ª–ª–µ—Ä—É: "–°–ø–æ—Ä —Ä–µ—à—ë–Ω –≤ –ø–æ–ª—å–∑—É –∫–ª–∏–µ–Ω—Ç–∞. –®—Ç—Ä–∞—Ñ 500‚ÇΩ"

### –ü—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ —Å–ø–æ—Ä–∞

1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**
   - `customer.reliabilityScore -= 10`
   - `shop.disputesWon++`
2. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
   - –ö–ª–∏–µ–Ω—Ç—É: "–°–ø–æ—Ä –æ—Ç–∫–ª–æ–Ω—ë–Ω. –ü—Ä–∏—á–∏–Ω–∞: –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤"
   - –°–µ–ª–ª–µ—Ä—É: "–°–ø–æ—Ä —Ä–µ—à—ë–Ω –≤ –≤–∞—à—É –ø–æ–ª—å–∑—É"

---

## 5. –†–µ–π—Ç–∏–Ω–≥ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞

–°–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –º–æ—à–µ–Ω–Ω–∏–∫–æ–≤ –∏ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π.

### –†–∞—Å—á—ë—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞ (0-100)

```
–ë–∞–∑–æ–≤—ã–π: 100 –±–∞–ª–ª–æ–≤

–í—ã—á–∏—Ç–∞–Ω–∏—è:
- –ß–∞—Å—Ç–æ—Ç–∞ —Å–ø–æ—Ä–æ–≤ >5%: -10 –±–∞–ª–ª–æ–≤ –∑–∞ –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç
- –ö–∞–∂–¥—ã–π –æ—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã–π —Å–ø–æ—Ä: -10 –±–∞–ª–ª–æ–≤
- –ü–æ–¥–æ–∑—Ä–µ–Ω–∏–µ –≤ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–µ: -50 –±–∞–ª–ª–æ–≤
- –ù–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç (<1 –º–µ—Å—è—Ü–∞): -20 –±–∞–ª–ª–æ–≤

–ò—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–ª = max(0, –ë–∞–∑–æ–≤—ã–π - Œ£ –í—ã—á–∏—Ç–∞–Ω–∏—è)
```

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏

| –î–∏–∞–ø–∞–∑–æ–Ω | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è |
|----------|-----------|-------------|
| 90-100 | –û—Ç–ª–∏—á–Ω—ã–π | –°–ø–æ—Ä—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ |
| 70-89 | –•–æ—Ä–æ—à–∏–π | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ |
| 50-69 | –°—Ä–µ–¥–Ω–∏–π | –¢—â–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ |
| 30-49 | –ù–∏–∑–∫–∏–π | –¢—Ä–µ–±—É—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –∞—Ä–±–∏—Ç—Ä–∞–∂ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω |
| 0-29 | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Å–ø–æ—Ä—ã** |

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞

- **+1 –±–∞–ª–ª** –∑–∞ –∫–∞–∂–¥—ã–π –∑–∞–∫–∞–∑ –±–µ–∑ —Å–ø–æ—Ä–æ–≤
- **+5 –±–∞–ª–ª–æ–≤** –ø—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–æ—Ä–∞
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥: 100 –±–∞–ª–ª–æ–≤

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–≤–æ–¥–∫–∞

### –°—É—â–Ω–æ—Å—Ç—å Dispute (—á–µ—Ä–µ–∑ Issue)

```typescript
{
  type: "DISPUTE",
  category: DisputeCategory,
  order: ObjectId,
  fromUserType: "Customer",
  from: ObjectId,  // Customer ID
  issueText: string,
  evidence: {
    photos: string[],  // 2-5 —Ñ–æ—Ç–æ
    video?: string
  },
  affectedProducts: Array<{
    shopProduct: ObjectId,
    orderedQuantity: number,
    affectedQuantity: number,
    claimedRefund: number
  }>,
  totalClaimedAmount: number,
  shopResponse?: {
    action: "ACCEPT" | "PARTIAL_ACCEPT" | "REJECT",
    comment: string,
    evidence?: { photos: string[] },
    respondedAt: Date
  },
  platformDecision?: {
    decision: ResolutionType,
    amount: number,
    penalty: number,
    bonus: number,
    comment: string,
    decidedAt: Date,
    decidedBy: ObjectId
  },
  status: IssueStatus
}
```

### API

**Customer:**
- `POST /customer/orders/:id/disputes` - –æ—Ç–∫—Ä—ã—Ç—å —Å–ø–æ—Ä
- `GET /customer/disputes` - –º–æ–∏ —Å–ø–æ—Ä—ã
- `GET /customer/reliability-score` - —Ä–µ–π—Ç–∏–Ω–≥ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏

**Seller:**
- `GET /seller/disputes` - —Å–ø–æ—Ä—ã –ø–æ –º–æ–∏–º –º–∞–≥–∞–∑–∏–Ω–∞–º
- `POST /seller/disputes/:id/respond` - –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Å–ø–æ—Ä
- `GET /seller/disputes/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–ø–æ—Ä–æ–≤

**Platform:**
- `GET /platform/disputes` - –≤—Å–µ —Å–ø–æ—Ä—ã (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
- `GET /platform/disputes?requiresArbitration=true` - —Ç—Ä–µ–±—É—é—Ç –∞—Ä–±–∏—Ç—Ä–∞–∂–∞
- `POST /platform/disputes/:id/resolve` - –≤—ã–Ω–µ—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏–µ
- `GET /platform/disputes/analytics` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞

1. **–°—Ä–æ–∫ –æ—Ç–∫—Ä—ã—Ç–∏—è:** –î–æ 24 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∞–≤–∫–∏
2. **–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞:** –ú–∏–Ω–∏–º—É–º 2 —Ñ–æ—Ç–æ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
3. **–°—Ä–æ–∫ –æ—Ç–≤–µ—Ç–∞ –º–∞–≥–∞–∑–∏–Ω–∞:** 12 —á–∞—Å–æ–≤
4. **–ê–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏–µ:** –ü—Ä–∏ –Ω–µ–æ—Ç–≤–µ—Ç–µ –º–∞–≥–∞–∑–∏–Ω–∞ + —à—Ç—Ä–∞—Ñ 200‚ÇΩ
5. **–ê—Ä–±–∏—Ç—Ä–∞–∂ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω:** –ü—Ä–∏ —Å—É–º–º–µ >5000‚ÇΩ –∏–ª–∏ —Ä–µ–π—Ç–∏–Ω–≥–µ –∫–ª–∏–µ–Ω—Ç–∞ <50
6. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–ø–æ—Ä–æ–≤:** –ü—Ä–∏ —Ä–µ–π—Ç–∏–Ω–≥–µ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ <30 –±–∞–ª–ª–æ–≤
7. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:** +1 –±–∞–ª–ª –∑–∞ –∑–∞–∫–∞–∑ –±–µ–∑ —Å–ø–æ—Ä–æ–≤

---

## –ü—Ä–∏–º–µ—Ä—ã

### –£—Å–ø–µ—à–Ω—ã–π —Å–ø–æ—Ä

```typescript
// 1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–ø–æ—Ä
const dispute = await disputePort.createDispute({
  orderId,
  category: "PRODUCT_QUALITY",
  description: "–Ø–±–ª–æ–∫–∏ –≥–Ω–∏–ª—ã–µ –≤–Ω—É—Ç—Ä–∏",
  photos: ["photo1.jpg", "photo2.jpg"],
  claimedAmount: 500
});

// 2. –ú–∞–≥–∞–∑–∏–Ω –ø—Ä–∏–∑–Ω–∞—ë—Ç
await disputePort.respondToDispute(disputeId, {
  action: "ACCEPT",
  comment: "–ü—Ä–∏–Ω–æ—Å–∏–º –∏–∑–≤–∏–Ω–µ–Ω–∏—è"
});

// 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
// - Refund 500‚ÇΩ
// - Penalty 500‚ÇΩ
// - Bonus 100 –±–∞–ª–ª–æ–≤
```

### –°–ø–æ—Ä —Å –∞—Ä–±–∏—Ç—Ä–∞–∂–µ–º

```typescript
// 1. –ú–∞–≥–∞–∑–∏–Ω –æ—Å–ø–∞—Ä–∏–≤–∞–µ—Ç
await disputePort.respondToDispute(disputeId, {
  action: "REJECT",
  comment: "–¢–æ–≤–∞—Ä –±—ã–ª —Å–≤–µ–∂–∏–º",
  evidence: { photos: ["proof.jpg"] }
});

// 2. –ê–¥–º–∏–Ω —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç
await disputePort.resolveDispute(disputeId, {
  decision: "PARTIAL_REFUND",
  amount: 250,
  penalty: 200,
  bonus: 50,
  comment: "–ß–∞—Å—Ç–∏—á–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–µ—Ç–µ–Ω–∑–∏—è"
});
```

---

## –°–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

**Order Flow:**
- –°–ø–æ—Ä—ã –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è `DELIVERED` –∑–∞–∫–∞–∑–æ–≤
- –í —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∞–≤–∫–∏

**Finance Flow:**
- –í–æ–∑–≤—Ä–∞—Ç—ã —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ `SettlementPeriod.refunds`
- –®—Ç—Ä–∞—Ñ—ã —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ `SettlementPeriod.penalties`

**Loyalty Flow:**
- –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ –∑–∞ —Å–ø–æ—Ä—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –±–æ–Ω—É—Å–Ω—ã–º–∏ –±–∞–ª–ª–∞–º–∏

**Rating Flow:**
- –†–µ—à—ë–Ω–Ω—ã–µ —Å–ø–æ—Ä—ã –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–µ–π—Ç–∏–Ω–≥ –º–∞–≥–∞–∑–∏–Ω–∞

---

> **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤  
> **–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2024-11-24
