# Бизнес-процессы платформы

Сквозные процессы независимо от ролей.

---

## Шаблон документации процесса

Каждый документ процесса должен следовать единой структуре для консистентности.

### Обязательные секции

```markdown
# Процесс: Название (English Name)

**Участники:** Customer, Seller, Employee, PlatformStaff  
**Длительность:** примерное время процесса (опционально)  
**Зависимости:** связанные модули/процессы

---

## Краткое содержание

### Основная идея
Краткое описание процесса в 2-3 предложения. Что делает, зачем нужен, 
какой результат. Ключевые слова выделять **жирным**.

**Весь цикл:** шаг1 → шаг2 → шаг3 → результат.

### Ключевая логика
Описание главных бизнес-правил процесса. Разбить на подсекции 
по ключевым аспектам. Каждая подсекция — 2-4 пункта.

### Статусы/Состояния (если есть)
`STATUS_1` → `STATUS_2` → `STATUS_3`

Краткое описание переходов.

---

## Обзор
Развёрнутое описание процесса. Цель, результат, ключевые принципы.

---

## [Основные секции]
Сценарии, шаги, State Machine, операции — зависит от процесса.

---

## Структура данных
Описание ключевых сущностей/схем, используемых в процессе.

---

## События
Таблица событий, которые эмитит процесс.

---

## Ошибки
Таблица кодов ошибок с описаниями.

---

## Взаимодействие с другими процессами
Связи с другими процессами (входящие/исходящие).

---

## Статус реализации
Чеклист реализованных/нереализованных фич.
```

### Правила оформления

| Элемент | Правило |
|---------|---------|
| **Заголовок** | `# Процесс: Название (English Name)` |
| **Метаданные** | Жирный текст: Участники, Длительность (опц.), Зависимости |
| **Краткое содержание** | Всегда первая секция после метаданных. 3 подсекции: Основная идея, Ключевая логика, Статусы |
| **Жирный текст** | Выделять ключевые термины и названия сущностей |
| **Цепочка статусов** | Формат: `STATUS_1` → `STATUS_2` → `STATUS_3` |
| **Таблицы** | Для структурированных данных (статусы, события, ошибки) |
| **Диаграммы** | ASCII-арт для State Machine и flowcharts |
| **Код** | TypeScript интерфейсы для структур данных |
| **API** | Формат: `METHOD /path` с описанием |

### Пример краткого содержания

```markdown
## Краткое содержание

### Основная идея

Клиент добавляет товары в **корзину**, оформляет **заказ**, оплачивает онлайн. 
Сотрудник магазина **собирает** заказ, курьер **доставляет**.

**Весь цикл:** корзина → оформление → оплата → сборка → доставка.

### Ключевая логика

**Фиксация данных:**
- При оформлении заказа цены фиксируются
- Состав заказа копируется из корзины

**Один заказ = один магазин:**
- Нельзя заказать из разных магазинов в одном заказе

### Статусы заказа

`PENDING` → `PAID` → `ASSEMBLING` → `IN_DELIVERY` → `DELIVERED`
```

---

## Список процессов

### ✅ Документированные

| Процесс | Файл | Описание |
|---------|------|----------|
| **Корзина** | [cart-flow.md](./cart-flow.md) | Управление корзиной, добавление товаров, валидация |
| **Заказ** | [order-flow.md](./order-flow.md) | Создание заказа, оплата, сборка, доставка, завершение |
| **Регистрация** | [registration-flow.md](./registration-flow.md) | Онбординг клиентов, селлеров, создание магазинов, найм сотрудников |
| **Каталог** | [catalog-flow.md](./catalog-flow.md) | Создание Product, распределение по магазинам (ShopProduct) |
| **Поддержка** | [support-flow.md](./support-flow.md) | Обращения клиентов/селлеров, категоризация, обработка |
| **Верификация/блокировка** | [verification-flow.md](./verification-flow.md) | Верификация и блокировка селлеров/магазинов/клиентов |
| **Смены** | [shift-flow.md](./shift-flow.md) | Открытие/закрытие смен, паузы, state machine, event log |
| **Оплата** | [payment-flow.md](./payment-flow.md) | ЮKassa, агентская схема, чеки, webhook, возвраты |
| **Финансы** | [finance-flow.md](./finance-flow.md) | Расчётные периоды, штрафы/бонусы, выплаты селлерам |
| **Складской учёт** | [inventory-flow.md](./inventory-flow.md) | Приёмка, перемещения, списания, инвентаризация, импорт |
| **Комиссии** | [commission-flow.md](./commission-flow.md) | Динамический расчёт комиссий, скидки и надбавки |
| **Споры** | [dispute-flow.md](./dispute-flow.md) | Гарантия качества, арбитраж, рейтинг надёжности клиента |
| **Лояльность** | [loyalty-flow.md](./loyalty-flow.md) | Баллы, кэшбек, уровни лояльности, срок действия |
| **Рейтинги** | [rating-review-flow.md](./rating-review-flow.md) | Оценки заказов, отзывы, агрегация рейтингов, модерация |
| **Уведомления** | [notification-flow.md](./notification-flow.md) | Мультиканальные уведомления, настройки, приоритеты |
| **Доставка** | [delivery-flow.md](./delivery-flow.md) | Логистика, зоны доставки, курьеры |
| **Маркетинг** | [marketing-flow.md](./marketing-flow.md) | Промокоды, акции, рекламные кампании |
| **Аналитика** | [analytics-flow.md](./analytics-flow.md) | Отчёты, метрики, дашборды |
| **Контент** | [content-flow.md](./content-flow.md) | Статьи, баннеры, CMS |

---

**Статус:** ✅ Все процессы документированы (19/19)