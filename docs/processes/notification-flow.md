# –ü—Ä–æ—Ü–µ—Å—Å: –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–£—á–∞—Å—Ç–Ω–∏–∫–∏:** Customer, Seller, Employee, PlatformStaff  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** Notification Module, Telegram Bot, SMS Provider, Email Service, Push Service

---

## –ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è

–ü—Ä–∏ –ª—é–±–æ–º —Å–æ–±—ã—Ç–∏–∏ –≤ —Å–∏—Å—Ç–µ–º–µ (—Å–æ–∑–¥–∞–Ω –∑–∞–∫–∞–∑, –∏–∑–º–µ–Ω–∏–ª—Å—è —Å—Ç–∞—Ç—É—Å, –ø—Ä–∏—à–ª–∞ –æ–ø–ª–∞—Ç–∞) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è **—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —á–µ—Ä–µ–∑ **–Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª–æ–≤**: Telegram (–æ—Å–Ω–æ–≤–Ω–æ–π), Push (–º–æ–±–∏–ª–∫–∞), SMS (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ), Email (–æ—Ç—á—ë—Ç—ã), In-App (–≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è). –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–º–µ—é—Ç **–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç** (URGENT ‚Üí –≤—Å–µ –∫–∞–Ω–∞–ª—ã —Å—Ä–∞–∑—É, LOW ‚Üí —Ç–æ–ª—å–∫–æ in-app). –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, –∫–∞–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—É—á–∞—Ç—å.

**–°—Ö–µ–º–∞:** –°–æ–±—ã—Ç–∏–µ ‚Üí –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π ‚Üí –≤—ã–±–æ—Ä –∫–∞–Ω–∞–ª–æ–≤ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ ‚Üí retry –ø—Ä–∏ –æ—à–∏–±–∫–µ.

### –ö–ª—é—á–µ–≤–∞—è –ª–æ–≥–∏–∫–∞

**–ö–∞–Ω–∞–ª—ã –¥–æ—Å—Ç–∞–≤–∫–∏:**
- **Telegram** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª (–±–æ—Ç—ã –¥–ª—è Customer/Seller/Employee)
- **Push** ‚Äî –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ Firebase FCM)
- **SMS** ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö (–æ–ø–ª–∞—Ç–∞ –Ω–µ –ø—Ä–æ—à–ª–∞, –∑–∞–∫–∞–∑ –æ—Ç–º–µ–Ω—ë–Ω)
- **Email** ‚Äî –¥–∞–π–¥–∂–µ—Å—Ç—ã, –æ—Ç—á—ë—Ç—ã, —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- **In-App** ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –ø–∞–Ω–µ–ª–∏ (–≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:**
- `URGENT` ‚Äî –∫—Ä–∏—Ç–∏—á–Ω—ã–µ (–Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞) ‚Üí –≤—Å–µ –∫–∞–Ω–∞–ª—ã + –ø–æ–≤—Ç–æ—Ä—ã
- `HIGH` ‚Äî –≤–∞–∂–Ω—ã–µ (–∑–∞–∫–∞–∑ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω, —Å–ø–æ—Ä –æ—Ç–∫—Ä—ã—Ç) ‚Üí Telegram + Push + SMS
- `MEDIUM` ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ (–∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç, —Å–º–µ–Ω–∞ –Ω–∞—á–∞–ª–∞—Å—å) ‚Üí Telegram + Push
- `LOW` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ (–Ω–æ–≤–∞—è –∞–∫—Ü–∏—è, —Å—Ç–∞—Ç—å—è –≤ –±–ª–æ–≥–µ) ‚Üí In-App

**–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
- **–î–ª—è Customer**: ORDER_CREATED, ORDER_DELIVERED, PAYMENT_FAILED, POINTS_EARNED
- **–î–ª—è Seller**: NEW_ORDER (URGENT), SETTLEMENT_PERIOD_CLOSED, DISPUTE_OPENED
- **–î–ª—è Employee**: SHIFT_STARTING_SOON, NEW_TASK_ASSIGNED, URGENT_ORDER
- **–î–ª—è PlatformStaff**: CRITICAL_ERROR, FRAUD_DETECTED, NEW_SELLER_VERIFICATION

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–∫–ª—é—á–∏—Ç—å SMS)
- –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –ø–æ–ª—É—á–∞—Ç—å –ø—Ä–æ–º–æ)
- DND —Ä–µ–∂–∏–º (Do Not Disturb) ‚Äî –Ω–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å —Å 22:00 –¥–æ 8:00
- **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ**: URGENT —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç DND

**Retry –ª–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å (Telegram –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω, Push –Ω–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω)
- –î–ª—è URGENT ‚Äî –¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 1 –º–∏–Ω—É—Ç–∞
- –î–ª—è –¥—Ä—É–≥–∏—Ö ‚Äî 1 –ø–æ–ø—ã—Ç–∫–∞, –ø–æ—Ç–æ–º –æ—Ç–º–µ—Ç–∫–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏
- Webhook –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É

**Real-time —á–µ—Ä–µ–∑ WebSocket:**
- In-App —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ WebSocket
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- Toast/banner –¥–ª—è –≤–∞–∂–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î —Å –æ—Ç–º–µ—Ç–∫–∞–º–∏: –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ/–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, –ø—Ä–æ—á–∏—Ç–∞–Ω–æ/–Ω–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ, –∫–∞–Ω–∞–ª –¥–æ—Å—Ç–∞–≤–∫–∏. –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –ø–∞–Ω–µ–ª–∏.

---

## –û–±–∑–æ—Ä

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞–Ω–∞–ª–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏.

**–ö–∞–Ω–∞–ª—ã –¥–æ—Å—Ç–∞–≤–∫–∏:**
- **Telegram** (–æ—Å–Ω–æ–≤–Ω–æ–π) - –±–æ—Ç –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π
- **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** (–º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- **SMS** (—Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ)
- **Email** (–æ—Ç—á—ë—Ç—ã –∏ –¥–∞–π–¥–∂–µ—Å—Ç—ã)
- **In-App** (–≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:**
- **URGENT** - –∫—Ä–∏—Ç–∏—á–Ω—ã–µ (–Ω–æ–≤—ã–π –∑–∞–∫–∞–∑, –ø–ª–∞—Ç—ë–∂, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)
- **HIGH** - –≤–∞–∂–Ω—ã–µ (–¥–æ—Å—Ç–∞–≤–∫–∞, —Å–ø–æ—Ä—ã)
- **MEDIUM** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ (–æ—Ç–∑—ã–≤—ã, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
- **LOW** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ (–∞–∫—Ü–∏–∏, –Ω–æ–≤–æ—Å—Ç–∏)

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–ª—è URGENT (–¥–æ 3 —Ä–∞–∑)
- Real-time —á–µ—Ä–µ–∑ WebSocket
- –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (cron)
- DND —Ä–µ–∂–∏–º (–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ URGENT)

---

## 1. –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–ê–∫—Ç–æ—Ä:** –°–∏—Å—Ç–µ–º–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö)

### –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π

1. –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–æ–±—ã—Ç–∏–µ –≤ —Å–∏—Å—Ç–µ–º–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞–Ω –∑–∞–∫–∞–∑)
2. –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –∏ —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
3. –°–æ–∑–¥–∞—ë—Ç—Å—è `Notification`:
   ```typescript
   {
     recipientType: "Customer",
     recipientId: customerId,
     type: "ORDER_CREATED",
     title: "–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω",
     message: "–í–∞—à –∑–∞–∫–∞–∑ #12345 –ø—Ä–∏–Ω—è—Ç –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É",
     priority: "HIGH",
     channels: ["telegram", "push", "in_app"],
     metadata: {
       orderId: "12345",
       shopName: "–§—Ä—É–∫—Ç–æ–≤–∞—è –±–∞–∑–∞",
       totalAmount: 1500
     },
     actionUrl: "/orders/12345",
     status: "UNREAD"
   }
   ```
4. **–î–æ—Å—Ç–∞–≤–∫–∞ —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª—ã:**
   ```typescript
   // –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
   await Promise.allSettled([
     sendTelegram(notification),
     sendPush(notification),
     saveInApp(notification)  // –í—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
   ]);
   ```
5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏:
   ```typescript
   {
     deliveryStatus: {
       telegram: { status: "DELIVERED", deliveredAt: Date },
       push: { status: "DELIVERED", deliveredAt: Date },
       in_app: { status: "CREATED", deliveredAt: Date }
     }
   }
   ```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ –∫–∞–Ω–∞–ª—ã

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö–∞–Ω–∞–ª—ã | –ü–æ–≤—Ç–æ—Ä—ã | –ü—Ä–∏–º–µ—Ä |
|-----------|--------|---------|--------|
| **URGENT** | Telegram + Push + SMS + In-App | –î–æ 3 —Ä–∞–∑ | –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞ |
| **HIGH** | Telegram + Push + In-App | 1 —Ä–∞–∑ | –ó–∞–∫–∞–∑ –≤ –¥–æ—Å—Ç–∞–≤–∫–µ |
| **MEDIUM** | Telegram + In-App | –ù–µ—Ç | –ù–æ–≤—ã–π –æ—Ç–∑—ã–≤ |
| **LOW** | In-App + –¥–∞–π–¥–∂–µ—Å—Ç | –ù–µ—Ç | –ê–∫—Ü–∏–∏, –Ω–æ–≤–æ—Å—Ç–∏ |

---

## 2. –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ —Ä–æ–ª—è–º

### Customer (–∫–ª–∏–µ–Ω—Ç—ã)

#### –ó–∞–∫–∞–∑—ã

| –¢–∏–ø | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è |
|-----|-----------|--------------------|
| `ORDER_CREATED` | HIGH | –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω –∏ –æ–ø–ª–∞—á–µ–Ω |
| `ORDER_ACCEPTED` | MEDIUM | –ú–∞–≥–∞–∑–∏–Ω –ø—Ä–∏–Ω—è–ª –∑–∞–∫–∞–∑ |
| `ORDER_IN_ASSEMBLY` | MEDIUM | –ù–∞—á–∞—Ç–∞ —Å–±–æ—Ä–∫–∞ |
| `ORDER_READY` | HIGH | –ì–æ—Ç–æ–≤ –∫ –≤—ã–¥–∞—á–µ/–¥–æ—Å—Ç–∞–≤–∫–µ |
| `ORDER_IN_DELIVERY` | HIGH | –ö—É—Ä—å–µ—Ä –≤ –ø—É—Ç–∏ |
| `ORDER_DELIVERED` | HIGH | –ó–∞–∫–∞–∑ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω |
| `ORDER_CANCELLED` | MEDIUM | –ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω—ë–Ω |
| `REQUEST_FEEDBACK` | LOW | –ß–µ—Ä–µ–∑ 1 —á–∞—Å –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∞–≤–∫–∏ |

#### –§–∏–Ω–∞–Ω—Å—ã

| –¢–∏–ø | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è |
|-----|-----------|--------------------|
| `PAYMENT_RECEIVED` | HIGH | –û–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–∞ |
| `PAYMENT_FAILED` | URGENT | –û—à–∏–±–∫–∞ –æ–ø–ª–∞—Ç—ã |
| `REFUND_PROCESSED` | HIGH | –í–æ–∑–≤—Ä–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω |

#### –õ–æ—è–ª—å–Ω–æ—Å—Ç—å

| –¢–∏–ø | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è |
|-----|-----------|--------------------|
| `POINTS_EARNED` | MEDIUM | –ù–∞—á–∏—Å–ª–µ–Ω—ã –±–∞–ª–ª—ã |
| `POINTS_EXPIRING` | MEDIUM | –ó–∞ 7 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è (‚â•50 –±–∞–ª–ª–æ–≤) |
| `TIER_UPGRADED` | MEDIUM | –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è |

#### –°–ø–æ—Ä—ã

| –¢–∏–ø | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è |
|-----|-----------|--------------------|
| `DISPUTE_CREATED` | HIGH | –°–ø–æ—Ä –æ—Ç–∫—Ä—ã—Ç |
| `SHOP_RESPONDED` | HIGH | –ú–∞–≥–∞–∑–∏–Ω –æ—Ç–≤–µ—Ç–∏–ª –Ω–∞ —Å–ø–æ—Ä |
| `DISPUTE_RESOLVED` | HIGH | –°–ø–æ—Ä —Ä–µ—à—ë–Ω |

---

### Seller (–ø—Ä–æ–¥–∞–≤—Ü—ã)

#### –ó–∞–∫–∞–∑—ã

| –¢–∏–ø | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è |
|-----|-----------|--------------------|
| `NEW_ORDER` | **URGENT** | –ù–æ–≤—ã–π –æ–ø–ª–∞—á–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑ |
| `ORDER_OVERDUE` | URGENT | –ü—Ä–µ–≤—ã—à–µ–Ω SLA –ø—Ä–∏–Ω—è—Ç–∏—è |
| `ORDER_CANCELLED` | MEDIUM | –ö–ª–∏–µ–Ω—Ç –æ—Ç–º–µ–Ω–∏–ª –∑–∞–∫–∞–∑ |

#### –§–∏–Ω–∞–Ω—Å—ã

| –¢–∏–ø | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è |
|-----|-----------|--------------------|
| `SETTLEMENT_PERIOD_CLOSED` | HIGH | –ü–µ—Ä–∏–æ–¥ –∑–∞–∫—Ä—ã—Ç, –∫ –≤—ã–ø–ª–∞—Ç–µ X‚ÇΩ |
| `WITHDRAWAL_APPROVED` | HIGH | –í—ã–≤–æ–¥ –æ–¥–æ–±—Ä–µ–Ω |
| `WITHDRAWAL_REJECTED` | HIGH | –í—ã–≤–æ–¥ –æ—Ç–∫–ª–æ–Ω—ë–Ω |
| `PENALTY_APPLIED` | HIGH | –ù–∞–ª–æ–∂–µ–Ω —à—Ç—Ä–∞—Ñ |

#### –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

| –¢–∏–ø | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è |
|-----|-----------|--------------------|
| `ACCOUNT_VERIFIED` | HIGH | –ê–∫–∫–∞—É–Ω—Ç –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω |
| `ACCOUNT_BLOCKED` | **URGENT** | –ê–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω |
| `SHOP_VERIFIED` | HIGH | –ú–∞–≥–∞–∑–∏–Ω –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω |

#### –°–ø–æ—Ä—ã –∏ –æ—Ç–∑—ã–≤—ã

| –¢–∏–ø | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è |
|-----|-----------|--------------------|
| `DISPUTE_OPENED` | **URGENT** | –û—Ç–∫—Ä—ã—Ç —Å–ø–æ—Ä –ø–æ –∑–∞–∫–∞–∑—É |
| `DISPUTE_RESPONSE_REQUIRED` | URGENT | 6 —á–∞—Å–æ–≤ –¥–æ –¥–µ–¥–ª–∞–π–Ω–∞ –æ—Ç–≤–µ—Ç–∞ |
| `NEW_REVIEW` | MEDIUM | –ù–æ–≤—ã–π –æ—Ç–∑—ã–≤ –Ω–∞ –∑–∞–∫–∞–∑ |
| `LOW_RATING_ALERT` | HIGH | –û—Ç–∑—ã–≤ ‚â§2 –∑–≤–µ–∑–¥—ã |

---

### Employee (—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏)

#### –°–º–µ–Ω—ã

| –¢–∏–ø | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è |
|-----|-----------|--------------------|
| `SHIFT_STARTING_SOON` | HIGH | –ó–∞ 30 –º–∏–Ω—É—Ç –¥–æ –Ω–∞—á–∞–ª–∞ |
| `SHIFT_STARTED` | MEDIUM | –°–º–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞ |
| `SHIFT_ENDED` | MEDIUM | –°–º–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∞ |

#### –ó–∞–¥–∞—á–∏ –∏ –∑–∞–∫–∞–∑—ã

| –¢–∏–ø | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è |
|-----|-----------|--------------------|
| `NEW_ORDER_FOR_ASSEMBLY` | HIGH | –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ –Ω–∞ —Å–±–æ—Ä–∫—É |
| `URGENT_ORDER` | **URGENT** | –°—Ä–æ—á–Ω—ã–π –∑–∞–∫–∞–∑ (–ø—Ä–µ–≤—ã—à–µ–Ω SLA) |
| `NEW_TASK_ASSIGNED` | MEDIUM | –ù–∞–∑–Ω–∞—á–µ–Ω–∞ –∑–∞–¥–∞—á–∞ |
| `TASK_OVERDUE` | HIGH | –ó–∞–¥–∞—á–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞ |

---

### PlatformStaff (–∞–¥–º–∏–Ω—ã)

| –¢–∏–ø | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è |
|-----|-----------|--------------------|
| `NEW_SELLER_APPLICATION` | MEDIUM | –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å–µ–ª–ª–µ—Ä–∞ |
| `NEW_DISPUTE_FOR_REVIEW` | HIGH | –°–ø–æ—Ä —Ç—Ä–µ–±—É–µ—Ç –∞—Ä–±–∏—Ç—Ä–∞–∂–∞ |
| `SYSTEM_ERROR` | **URGENT** | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ |
| `SYSTEM_MAINTENANCE` | MEDIUM | –ü–ª–∞–Ω–æ–≤–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ |

---

## 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ê–∫—Ç–æ—Ä:** Customer / Seller / Employee

### –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π

–ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, –∫–∞–∫ –æ–Ω —Ö–æ—á–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:

1. –í –ø–∞–Ω–µ–ª–∏ ‚Üí "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–Ω–∞–ª–æ–≤:
   ```typescript
   {
     channels: {
       telegram: true,     // –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å
       push: true,         // –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å
       sms: false,         // –¢–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ (–Ω–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –¥–ª—è URGENT)
       email: true,        // –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å
       in_app: true        // –í—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω–æ (–Ω–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è)
     }
   }
   ```
3. **Do Not Disturb (DND):**
   ```typescript
   {
     doNotDisturb: {
       enabled: true,
       from: "22:00",
       to: "08:00"
     }
   }
   ```
   - –í —ç—Ç–æ –≤—Ä–µ–º—è LOW –∏ MEDIUM –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç
   - **URGENT –∏ HIGH –ø—Ä–∏—Ö–æ–¥—è—Ç –≤—Å–µ–≥–¥–∞** (–∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç DND)

4. **–¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ —Ç–∏–ø–∞–º:**
   ```typescript
   {
     typePreferences: {
       "ORDER_CREATED": { enabled: true, channels: ["telegram", "push"] },
       "PROMOTIONAL": { enabled: false },  // –û—Ç–∫–ª—é—á–∏—Ç—å –∞–∫—Ü–∏–∏
       "NEW_REVIEW": { enabled: true, channels: ["in_app"] }  // –¢–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
     }
   }
   ```

**API:** 
- `GET /notification-settings`
- `PATCH /notification-settings`

---

## 4. –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–ê–∫—Ç–æ—Ä:** –°–∏—Å—Ç–µ–º–∞ (cron job)

### –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–µ —Å—Ä–∞–∑—É, –∞ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é:

1. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω—É–∂–Ω–∞ –ª–∏ –∑–∞–¥–µ—Ä–∂–∫–∞
2. –°–æ–∑–¥–∞—ë—Ç—Å—è `Notification` —Å `scheduledFor`:
   ```typescript
   {
     type: "SHIFT_STARTING_SOON",
     recipientType: "Employee",
     recipientId: employeeId,
     scheduledFor: shiftStartTime - 30 –º–∏–Ω—É—Ç,  // –ó–∞ 30 –º–∏–Ω –¥–æ —Å–º–µ–Ω—ã
     status: "SCHEDULED"
   }
   ```
3. Cron job –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   ```typescript
   const pending = await Notification.find({
     status: "SCHEDULED",
     scheduledFor: { $lte: new Date() }
   });
   
   for (const notification of pending) {
     await sendNotification(notification);
     notification.status = "SENT";
   }
   ```

### –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

| –¢–∏–ø | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è | –í—Ä–µ–º—è –∑–∞–¥–µ—Ä–∂–∫–∏ |
|-----|-------------------|----------------|
| `SHIFT_STARTING_SOON` | –ó–∞ 30 –º–∏–Ω –¥–æ —Å–º–µ–Ω—ã | shift.startTime - 30 –º–∏–Ω |
| `POINTS_EXPIRING` | –ó–∞ 7 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è | expiryDate - 7 –¥–Ω–µ–π |
| `REQUEST_FEEDBACK` | –ß–µ—Ä–µ–∑ 1 —á–∞—Å –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∞–≤–∫–∏ | deliveredAt + 1 —á–∞—Å |

---

## 5. –î–∞–π–¥–∂–µ—Å—Ç—ã (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

**–ê–∫—Ç–æ—Ä:** –°–∏—Å—Ç–µ–º–∞ (cron job)

### –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π

–ù–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (LOW priority) –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –≤ –¥–∞–π–¥–∂–µ—Å—Ç—ã:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –¥–∞–π–¥–∂–µ—Å—Ç—ã:
   ```typescript
   {
     digest: {
       enabled: true,
       frequency: "daily",  // –∏–ª–∏ "weekly"
       time: "09:00"
     }
   }
   ```
2. –í–º–µ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ LOW —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å—Ä–∞–∑—É, –æ–Ω–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è
3. Cron job –≤ 09:00 (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ) —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –¥–∞–π–¥–∂–µ—Å—Ç:
   ```typescript
   {
     type: "DAILY_DIGEST",
     title: "–í–∞—à –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç",
     message: "–£ –≤–∞—Å 5 –Ω–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π",
     metadata: {
       notifications: [
         { type: "PROMOTIONAL", title: "–ù–æ–≤–∞—è –∞–∫—Ü–∏—è" },
         { type: "NEW_REVIEW", title: "–ù–æ–≤—ã–π –æ—Ç–∑—ã–≤" },
         // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ
       ],
       count: 5
     },
     channels: ["telegram", "email"]
   }
   ```
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–¥–∏–Ω –¥–∞–π–¥–∂–µ—Å—Ç –≤–º–µ—Å—Ç–æ 5 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

## 6. –ì–∞—Ä–∞–Ω—Ç–∏–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö

**–ê–∫—Ç–æ—Ä:** –°–∏—Å—Ç–µ–º–∞ (retry mechanism)

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–ª—è URGENT

1. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å `priority = URGENT` –Ω–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ Telegram
2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç:
   ```typescript
   async function sendWithRetry(notification: Notification, channel: string) {
     const maxRetries = notification.priority === "URGENT" ? 3 : 1;
     
     for (let attempt = 1; attempt <= maxRetries; attempt++) {
       try {
         await sendViaChannel(notification, channel);
         return { status: "DELIVERED" };
       } catch (error) {
         if (attempt < maxRetries) {
           const delay = Math.pow(2, attempt) * 1000;  // –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
           await sleep(delay);
         }
       }
     }
     
     return { status: "FAILED" };
   }
   ```
3. **–≠—Å–∫–∞–ª–∞—Ü–∏—è –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ:**
   - –ï—Å–ª–∏ –≤—Å–µ 3 –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ—É–¥–∞—á–Ω—ã ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É
   - –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é —Å–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

---

## 7. Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket

**–ê–∫—Ç–æ—Ä:** Customer / Seller / Employee (–≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏)

### –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ—Ä–µ–∑ WebSocket:
   ```typescript
   socket.emit("new-notification", {
     id: notificationId,
     type: "ORDER_IN_DELIVERY",
     title: "–ó–∞–∫–∞–∑ –≤ –ø—É—Ç–∏",
     message: "–í–∞—à –∑–∞–∫–∞–∑ #12345 —Å–∫–æ—Ä–æ –ø—Ä–∏–±—É–¥–µ—Ç"
   });
   ```
3. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç pop-up —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
4. **Fallback:** –ï—Å–ª–∏ WebSocket –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è long-polling

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–≤–æ–¥–∫–∞

### –°—É—â–Ω–æ—Å—Ç—å Notification

```typescript
{
  recipientType: "Customer" | "Seller" | "Employee" | "PlatformStaff",
  recipientId: ObjectId,
  type: NotificationType,
  title: string,
  message: string,
  priority: "URGENT" | "HIGH" | "MEDIUM" | "LOW",
  channels: string[],  // ["telegram", "push", "sms", "email", "in_app"]
  deliveryStatus: {
    telegram?: { status: "DELIVERED" | "FAILED", deliveredAt?: Date },
    push?: { status: "DELIVERED" | "FAILED", deliveredAt?: Date },
    // ... –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–∞–ª–∞
  },
  metadata: Record<string, any>,
  actionUrl?: string,
  status: "SCHEDULED" | "SENT" | "UNREAD" | "READ" | "ARCHIVED",
  scheduledFor?: Date,
  expiresAt?: Date,
  createdAt: Date
}
```

### –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π

```typescript
const templates = {
  ORDER_IN_DELIVERY: {
    telegram: "üöó –ó–∞–∫–∞–∑ #{{orderId}} –≤ –ø—É—Ç–∏! –ö—É—Ä—å–µ—Ä –ø—Ä–∏–±—É–¥–µ—Ç —á–µ—Ä–µ–∑ {{eta}} –º–∏–Ω—É—Ç",
    push: { 
      title: "–ó–∞–∫–∞–∑ –≤ –ø—É—Ç–∏!", 
      body: "–ö—É—Ä—å–µ—Ä –ø—Ä–∏–±—É–¥–µ—Ç —á–µ—Ä–µ–∑ {{eta}} –º–∏–Ω" 
    },
    sms: "FruktGo: –ó–∞–∫–∞–∑ #{{orderId}} –≤ –ø—É—Ç–∏"
  },
  
  NEW_ORDER: {
    telegram: "üõí –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ #{{orderId}} –Ω–∞ {{amount}}‚ÇΩ\n\n–ü—Ä–∏–º–∏—Ç–µ –≤ —Ç–µ—á–µ–Ω–∏–µ {{sla}} –º–∏–Ω—É—Ç",
    push: { 
      title: "–ù–æ–≤—ã–π –∑–∞–∫–∞–∑!", 
      body: "{{amount}}‚ÇΩ ‚Ä¢ {{itemsCount}} —Ç–æ–≤–∞—Ä–æ–≤" 
    },
    sms: "–ù–æ–≤—ã–π –∑–∞–∫–∞–∑ #{{orderId}}"
  }
};
```

### API

**User (Customer/Seller/Employee):**
- `GET /notifications` - —Å–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
- `GET /notifications/unread-count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- `PATCH /notifications/:id/read` - –æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ
- `PATCH /notifications/:id/archive` - –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å
- `GET /notification-settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `PATCH /notification-settings` - –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**Platform:**
- `POST /platform/notifications/broadcast` - –º–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞
- `GET /platform/notifications/delivery-stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏

### –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞

1. **In-App –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è** (–Ω–µ–ª—å–∑—è –æ—Ç–∫–ª—é—á–∏—Ç—å)
2. **SMS —Ç–æ–ª—å–∫–æ –¥–ª—è URGENT** (—ç–∫–æ–Ω–æ–º–∏—è —Å—Ä–µ–¥—Å—Ç–≤)
3. **DND –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ URGENT –∏ HIGH** (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤—Å–µ–≥–¥–∞)
4. **–ü–æ–≤—Ç–æ—Ä—ã –¥–æ 3 —Ä–∞–∑** –¥–ª—è URGENT —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
5. **–°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è:** 30 –¥–Ω–µ–π –¥–ª—è UNREAD, 7 –¥–Ω–µ–π –¥–ª—è READ
6. **–ê–≤—Ç–æ–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ:** —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π –¥–ª—è READ
7. **–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è** –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É (cron)
8. **–î–∞–π–¥–∂–µ—Å—Ç—ã** —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –≤ 09:00 –µ–∂–µ–¥–Ω–µ–≤–Ω–æ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

---

## –°–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

**Order Flow:**
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –∑–∞–∫–∞–∑–∞ (—Å–æ–∑–¥–∞–Ω, –ø—Ä–∏–Ω—è—Ç, —Å–æ–±—Ä–∞–Ω, –¥–æ—Å—Ç–∞–≤–ª–µ–Ω)

**Payment Flow:**
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–ø–ª–∞—Ç–µ, –≤–æ–∑–≤—Ä–∞—Ç–µ

**Loyalty Flow:**
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏, –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –±–∞–ª–ª–æ–≤, –ø–æ–≤—ã—à–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω—è

**Dispute Flow:**
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç–∫—Ä—ã—Ç–∏–∏, –æ—Ç–≤–µ—Ç–µ, —Ä–µ—à–µ–Ω–∏–∏ —Å–ø–æ—Ä–∞

**Shift Flow:**
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–º–µ–Ω–µ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

---

> **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤  
> **–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2024-11-24
